function initOrionWidgetInIframe({containerSelector:e="#orion-widget",options:n,partnerId:t,iframeClass:o,height:i=389,width:r=314}={}){const a={src:`https://trade.orion.xyz/widget/?${n&&new URLSearchParams(n).toString()}`,allow:"clipboard-write",loading:"lazy",scrolling:"no",frameborder:"0",style:"border: none",class:o,height:i,width:r};function c(e){return"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function d(e,n){const t=t=>{t.data.type===e&&n(t.data.data)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}function s(e,n){!function(e,n,t){e.postMessage({type:n,data:t},"*")}(l.contentWindow,e,n)}t&&(a["partner-id"]=t);const u=document.querySelector(`${e}`);if(!c(u))throw Error(`Could not find container for orion widget (${e})`);const l=document.createElement("iframe");Object.keys(a).forEach((e=>{l.setAttribute(e,a[e])})),u.append(l);const w=function(){if(!c(window.ethereum))return window.ethereum}();if(!window.orionWidgetInitialized&&w){let m;window.orionWidgetInitialized=!0;const h=([e])=>{s("metamaskAccountChanged",e)};function g(){w.request({method:"eth_requestAccounts"}).then(h)}const f=()=>{p(),w.on("accountsChanged",h),g()},p=()=>{w.removeListener("accountsChanged",h)};d("connectMetamask",(()=>f())),d("disconnectMetamask",(()=>p())),d("switchWidgetAccount",(({widgetManageUrl:e})=>{document.hidden||(m=window.open(e,"_blank"),(null==m||m.closed)&&s("syncPopupBlocked"))})),d("closeManage",(()=>{m?.close(),g()}))}}